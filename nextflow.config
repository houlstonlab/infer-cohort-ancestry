report {
  overwrite = true
}

singularity {
  enabled = true
  autoMounts = true
}

process {
  withLabel: 'rocker'   { container = 'rocker/tidyverse:latest' }
  withLabel: 'bcftools' { container = 'bcftools.1.19' }
  withLabel: 'plink'    { container = 'plink.1.9' }
}

// Default params
params {  
  // QC
  MAF         = 0.0005
  HWE         = 0
  F_MISSING   = 0.8
  ExcHet      = 0
  GQ          = 0
  DP          = 0
  VAF         = 0

  // Prunning
  window      = 5
  step        = 5
  rsquared    = 0.00001
  relatedness = 0.000025

  // SNPs
  chunk       = 100000
  N_VARS      = 500000
  N_DIMS      = 5

  // Optional processes
  modes       = 'clusters,noclusters,mds'
  fix         = true
  remove      = true
  fill        = false
  prune       = true
}

profiles {
  // Resource profiles
  local     { includeConfig 'conf/local.config' }
  cluster   { includeConfig 'conf/cluster.config' }
  dynamic   { includeConfig 'conf/dynamic.config' }
  
  // Test profile
  test {
    params {
      cohorts           = "input/cohort.info.csv"
      fasta             = "input/assembly38.fasta{,.fai}"
      dbsnp             = "input/dbsnp_146.hg38.vcf.gz{,.tbi}"
      ld_regions        = "input/high_ld_regions.txt"
    }
  }
}
